/* 移动端FlipBook容器样式 */
.mobile-flipbook-container {
  position: relative;
  width: 100%;
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  z-index: 1;
}

/* 移动端书本样式 */
.mobile-book-portrait {
  height: calc(100vh - 40px) !important;
  width: min(calc((100vh - 40px) * 0.707), calc(100vw - 20px)) !important;
  max-height: calc(100vh - 40px) !important;
  max-width: calc(100vw - 20px) !important;
  margin: 0 auto !important;
  padding: 0 !important;
  overflow: hidden !important;
  background: transparent !important;
  z-index: 2 !important;
  display: block !important;
  box-sizing: border-box !important;
}

/* 小屏幕手机优化 */
@media (max-width: 480px) {
  .mobile-book-portrait {
    height: calc(100vh - 20px) !important;
    width: min(calc((100vh - 20px) * 0.707), calc(100vw - 10px)) !important;
    max-height: calc(100vh - 20px) !important;
    max-width: calc(100vw - 10px) !important;
  }
  
  .mobile-nav-button-left {
    left: max(0.25rem, calc((100vw - min(calc((100vh - 20px) * 0.707), calc(100vw - 10px))) / 2 - 1.5rem));
  }
  
  .mobile-nav-button-right {
    right: max(0.25rem, calc((100vw - min(calc((100vh - 20px) * 0.707), calc(100vw - 10px))) / 2 - 1.5rem));
  }
}

/* iPhone 15等现代手机专用优化 */
@media (max-width: 430px) {
  .mobile-book-portrait {
    height: calc(100vh - 16px) !important;
    width: min(calc((100vh - 16px) * 0.707), calc(100vw - 8px)) !important;
    max-height: calc(100vh - 16px) !important;
    max-width: calc(100vw - 8px) !important;
  }
  
  .mobile-nav-button-left {
    left: max(0.125rem, calc((100vw - min(calc((100vh - 16px) * 0.707), calc(100vw - 8px))) / 2 - 1.25rem));
  }
  
  .mobile-nav-button-right {
    right: max(0.125rem, calc((100vw - min(calc((100vh - 16px) * 0.707), calc(100vw - 8px))) / 2 - 1.25rem));
  }
  
  /* 强制HTMLFlipBook在iPhone上适应屏幕 */
  .mobile-book-portrait > div {
    width: 100% !important;
    height: 100% !important;
    max-width: 100% !important;
    max-height: 100% !important;
    overflow: hidden !important;
  }
  
  /* 小屏幕页码指示器优化 */
  .mobile-page-indicator {
    bottom: 0.75rem;
    padding: 0.125rem 0.5rem;
    font-size: 0.75rem;
    max-width: calc(100vw - 1rem);
  }
}

/* 超小屏幕优化 */
@media (max-width: 375px) {
  /* 超小屏幕尺寸重新计算 */
  .mobile-book-portrait {
    height: calc(100vh - 12px) !important;
    width: min(calc((100vh - 12px) * 0.707), calc(100vw - 6px)) !important;
    max-height: calc(100vh - 12px) !important;
    max-width: calc(100vw - 6px) !important;
    background: transparent !important;
    z-index: 2 !important;
    margin: 0 auto !important;
    padding: 0 !important;
  }
  
  .mobile-nav-button-left {
    left: max(0.125rem, calc((100vw - min(calc((100vh - 12px) * 0.707), calc(100vw - 6px))) / 2 - 1rem));
  }
  
  .mobile-nav-button-right {
    right: max(0.125rem, calc((100vw - min(calc((100vh - 12px) * 0.707), calc(100vw - 6px))) / 2 - 1rem));
  }
  
  /* 超小屏幕页码指示器进一步优化 */
  .mobile-page-indicator {
    bottom: 0.5rem;
    padding: 0.125rem 0.375rem;
    font-size: 0.75rem;
    max-width: calc(100vw - 1rem);
  }
}

/* 移动端HTMLFlipBook样式 */
.mobile-flipbook {
  width: 100% !important;
  height: 100% !important;
  max-width: 100% !important;
  max-height: 100% !important;
  overflow: hidden !important;
}

/* 移动端页面样式 */
.mobile-page {
  width: 100% !important;
  height: 100% !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  overflow: hidden !important;
  background: white !important;
  position: relative;
  z-index: 3;
}

.mobile-page-image {
  max-width: 100% !important;
  height: auto !important;
  object-fit: contain !important;
  object-position: center !important;
}

/* 移动端导航按钮 */
.mobile-nav-button {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 2.5rem;
  height: 2.5rem;
  background: rgba(255, 255, 255, 0.9);
  border: 2px solid #e5e7eb;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.125rem;
  font-weight: bold;
  color: #374151;
  cursor: pointer;
  transition: all 0.3s ease;
  z-index: 15;
  touch-action: manipulation;
}

.mobile-nav-button:hover {
  background: white;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
  border-color: #d1d5db;
}

.mobile-nav-button:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

.mobile-nav-button-left {
  left: max(0.5rem, calc((100vw - min(calc((100vh - 40px) * 0.707), calc(100vw - 20px))) / 2 - 2rem));
}

.mobile-nav-button-right {
  right: max(0.5rem, calc((100vw - min(calc((100vh - 40px) * 0.707), calc(100vw - 20px))) / 2 - 2rem));
}

/* 移动端页码指示器 */
.mobile-page-indicator {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: 1rem;
  padding: 0.25rem 0.75rem;
  font-size: 0.875rem;
  background: rgba(0, 0, 0, 0.7);
  color: white;
  border-radius: 9999px;
  backdrop-filter: blur(4px);
  max-width: calc(100vw - 2rem);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  z-index: 20;
}

/* 移动端提示文字 */
.mobile-hints {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  top: 1rem;
  padding: 0.25rem 0.5rem;
  font-size: 0.75rem;
  background: rgba(0, 0, 0, 0.8);
  color: white;
  border-radius: 9999px;
  opacity: 0.7;
  backdrop-filter: blur(4px);
  max-width: calc(100vw - 2rem);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  z-index: 10;
}

/* 超小屏幕隐藏提示 */
@media (max-width: 375px) {
  .mobile-hints {
    display: none !important;
  }
}
